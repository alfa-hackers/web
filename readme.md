# Whirav - Интеллектуальная бизнес-платформа на базе ИИ

[![Dev](https://img.shields.io/badge/dev-dev.whirav.ru-blue)](https://dev.whirav.ru)
[![Лицензия](https://img.shields.io/badge/license-MIT-green.svg)](LICENSE)

> Enterprise-решение для малого и среднего бизнеса: интеллектуальная обработка документов, бизнес-аналитика и автоматизация рабочих процессов на базе искусственного интеллекта.

## 🎯 О проекте

Whirav — это комплексная AI-платформа, которая предоставляет владельцам бизнеса:

- **Интеллектуальную обработку** документов PowerPoint, Word, PDF, Excel
- **Бизнес-аналитику** через естественные языковые запросы
- **Контекстную память** с сохранением истории диалогов
- **Автоматическую суммаризацию** контента через трансформеры (@xenova/transformers)

## ✨ Ключевые возможности

### Текущий функционал

- 📄 **Мультиформатность**: Поддержка PPTX, DOCX, PDF, XLSX
- 💬 **Разговорный ИИ**: Контекстно-зависимые диалоги
- 📊 **Бизнес-аналитика**: Запросы к данным на естественном языке
- 🔄 **Протокол**: Web socket
- 🗂️ **Статика**: minio
- 🔐 **Авторизация**: Ory

### Интеллектуальные функции

- **Суммаризация контекста**: Автоматическое сжатие длинных диалогов
- **Анализ файлов**: Глубокий разбор и извлечение бизнес-инсайтов
- **Мультисессионность**: Параллельные диалоги с изолированным контекстом


## 🛠️ Технологический стек

### Backend
- **Фреймворк**: NestJS (Node.js/TypeScript)
- **API**: Fastify, socket-io
- **База данных**: postgresql
- **Кэширование**: redis
- **Хранилище**: MinIO, S3-like (Упрощает хранение статики, позволяет это делать распределенно)
- **Аутентификация**: ORY
- **Документация**: Swagger
- **Пакетный менеджер**: yarn 

### Frontend
- **Фреймворк**: Next.js 16 (React 18+)
- **Язык**: typescript
- **Стили**: scss
- **Управление состоянием**: Redux toolkit
- **Пакетный менеджер**: pnpm

### Инфраструктура
- **Контейнеризация**: Docker (multi-stage builds)
- **Reverse Proxy**: nginx-proxy (jwilder)

### Тестирование и качество
- **Unit-тестирование**: Jest
- **Покрытие**: 80%+
- **Линтинг**: ESLint + Prettier
- **Типобезопасность**: TypeScript strict mode


#### Известные проблемы

> ⚠️ **Не долгоживущие токены**: openrouter токены лимитированы по количеству запрос, требуют переодического обновления


## 🏗️ Архитектура

### Текущая архитектура

```
┌─────────────────┐
│   Next.js App   │  (Frontend - React/TypeScript/SCSS)
└────────┬────────┘
         │ HTTP/WebSocket
┌────────▼────────┐
│   NestJS API    │  (Backend - Node.js/TypeScript)
├─────────────────┤
│  Fastify Server │
│   Socket.IO     │
└────┬───┬───┬────┘
     │   │   │
     │   │   └─────────┐
     │   │             │
┌────▼───▼────┐   ┌───▼──────┐   ┌─────────────┐
│  PostgreSQL │   │  MinIO   │   │    Redis    │
│  (TypeORM)  │   │ (Storage)│   │   (Cache)   │
└─────────────┘   └──────────┘   └─────────────┘
```

### Целевая архитектура (будущее)

```
┌──────────────────────────────────────────────────────┐
│                   Клиентский слой                    │
│    (Web, Mobile, Telegram Bot, Desktop)              │
└───────────────────────┬──────────────────────────────┘
                        │
┌───────────────────────▼──────────────────────────────┐
│              API Gateway (Istio)                     │
└───────┬──────────────────────────────┬───────────────┘
        │                              │
┌───────▼────────┐            ┌────────▼──────────┐
│  Presentation  │            │  Аутентификация   │
│     Layer      │            │ (Kratos + Keto)   │
└───────┬────────┘            └───────────────────┘
        │
┌───────▼────────┐
│   Use Cases    │  (Бизнес-логика)
└───────┬────────┘
        │
┌───────▼────────┐       ┌──────────────┐
│    Services    │◄──────┤  Event Bus   │
│   (Domain)     │       │   (Kafka)    │
└───────┬────────┘       └──────────────┘
        │
┌───────▼────────┐
│   Entities     │  (Доменные модели)
└───────┬────────┘
        │
┌───────▼────────────────────────────────┐
│     Ports & Adapters (Infrastructure)  │
├────────┬──────────┬──────────┬─────────┤
│   DB   │  Cache   │ Storage  │   MQ    │
│  (PG)  │ (Redis)  │ (MinIO)  │ (Kafka) │
└────────┴──────────┴──────────┴─────────┘
```

## 📊 Состояние проекта

### Текущий статус

Проект находится в активной разработке (MVP-стадия). Реализован базовый функционал обработки документов и аналитики. Архитектура заложена с прицелом на масштабирование, но требует рефакторинга для полного соответствия DDD-принципам.

### Что работает стабильно
- ✅ Загрузка и обработка документов (PDF, PPTX, DOCX, XLSX)
- ✅ AI-ассистент с поддержкой контекста
- ✅ Хранение истории диалогов
- ✅ Real-time коммуникация через WebSocket
- ✅ Базовая авторизация

### В процессе разработки
- 🔄 Докеризация stage
- 🔄 Покрытие тестами
- 🔄 Оптимизация производительности, снижение дедупликации данных и overhead.
- 🔄 UI/UX-полировка

### Технический долг
- ⚠️ Миграция на полноценный DDD с четким разделением слоев
- ⚠️ Внедрение CQRS для улучшения читаемости кода
- ⚠️ Рефакторинг фронтенда: выделение переиспользуемых компонентов
- ⚠️ Документация API (Swagger частично)


## 📞 Контакты

[t.me/vwency](https://t.me/vwency) - backend/frontend, team lead  
[t.me/SaCorv](https://t.me/SaCorv) - Ответсвенный за сервер  
[t.me/SyncI20n](https://t.me/SyncI20n) - Ответсвенный за UI/UX  
[t.me/MurkyShadow](https://t.me/MurkyShadow) -Менеджер, Product manager, контроль соответсвия требованиям  

- **Сайт**: [https://dev.whirav.ru](https://dev.whirav.ru)
- **Документация API**: [https://api.whirav.ru/api](https://api.whirav.ru/api)

